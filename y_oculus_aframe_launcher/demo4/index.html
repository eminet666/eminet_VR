<html>

<head>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
<script>
    AFRAME.registerComponent('gauche', {
        init: function() {
            const utilisateur = document.querySelector('#utilisateur');
            const boite = document.querySelector('#boite');
            console.log(boite);

            this.el.addEventListener("xbuttondown", function(event)	{
                    boite.setAttribute('color', 'white');
                    //window.location.href = 'https://supermedium.com/supercraft/';
        		});
        	}
        });

    // debug-keyboard
    AFRAME.registerComponent('debug-keyboard', {
        schema: {
            key: {
                type: 'array'
            },
            target: {
                type: 'array'
            },
            event: {
                type: 'array'
            },
        },
        init: function () {
            let key = this.data.key;
            let event = this.data.event;
            let target = this.data.target;
            document.addEventListener('keypress', evt => {
                for (var i = 0; i < key.length; i++) {
                    if (evt.keyCode === key[i].codePointAt(0)) {
                        let cible = document.querySelector(target[i]);
                        cible.emit(event[i]);
                        console.log("debug-keyboard : event '" + event[i] + "' sent to " + target[i]);
                    }
                }
            });
        }
    });



</script>    
</head>

<body>
    <a-scene  
        renderer="antialias: true"
        debug-keyboard="key: x; event: test; target: #boite">
        
        <a-box id="boite" position="-1 0.5 -3" rotation="0 45 0" color="blue"></a-box>
        <a-sphere position="0 1.25 -5" radius="1.25" color="blue"></a-sphere>
        <a-cylinder position="1 0.75 -3" radius="0.5" height="1.5" color="blue"></a-cylinder>
        <a-plane position="0 0 -4" rotation="-90 0 0" width="4" height="4" color="grey"></a-plane>
        <a-sky color="skyblue"></a-sky>

        <a-entity id="utilisateur" position="0 0 0">
            <a-entity camera position="0 1.5 1" look-controls></a-entity>
            <a-entity oculus-touch-controls="hand: left" gauche></a-entity>
            <a-entity oculus-touch-controls="hand: right"></a-entity>
        </a-entity>
            </a-entity>

    </a-scene>
</body>

</html>